# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура приложения "Веб-ларек"

## Основные части архитектуры

Проект разработан с применением паттерна проектирования MVP (Model-View-Presenter) и состоит из следующих основных частей:

1. **Model (Модель)**: Отвечает за работу с данными.
   - Класс `AppData`: Хранит и обрабатывает все данные приложения.

2. **View (Представление)**: Отвечает за отображение данных пользователю.
   - Компоненты: `Form`, `Modal`, `Card`, `Basket`, `ContactForm`, `OrderForm`, `Page`, `SuccessForm`.

3. **Presenter**: Связывает Model и View, обрабатывает пользовательский ввод.
   - Реализован в файле `index.ts`.

4. **API**: Отвечает за взаимодействие с сервером.
   - Классы `Api` и `WebLarekApi`.

5. **Event System**: Обеспечивает взаимодействие между компонентами.
   - Класс `EventEmitter`.

## Функции основных частей

1. **Model**: Хранит состояние приложения, обрабатывает и валидирует данные.
2. **View**: Отображает интерфейс пользователя, реагирует на изменения в данных.
3. **Presenter**: Координирует работу Model и View, обрабатывает пользовательские действия.
4. **API**: Отправляет запросы на сервер и обрабатывает ответы.
5. **Event System**: Обеспечивает слабую связанность компонентов, позволяя им обмениваться данными и сигналами.

## Взаимодействие частей

Взаимодействие между частями приложения происходит через систему событий (EventEmitter). Модели инициируют события, а слушатели в Presenter передают данные компонентам отображения.

## Данные приложения

Основные типы данных:

1. `IProduct`: Информация о товаре (id, name, price, image, description, category).
2. `IOrder`: Данные заказа (email, phone, address, payment).
3. `IAppState`: Состояние приложения (catalog, basket, order, formErrors).
4. `IFormErrors`: Ошибки валидации формы.

## Компоненты приложения

1. `Form`: Базовый класс для форм.
2. `Modal`: Отображение модальных окон.
3. `Card`: Отображение карточки товара.
4. `Basket`: Отображение корзины.
5. `ContactForm`: Форма контактных данных.
6. `OrderForm`: Форма оформления заказа.
7. `Page`: Главная страница приложения.
8. `SuccessForm`: Форма успешного оформления заказа.

## Процессы в приложении

Процессы реализованы через систему событий (EventEmitter). Основные события:

- `catalog:changed`: Изменение каталога товаров.
- `basket:changed`: Изменение состояния корзины.
- `order:submit`: Отправка заказа.
- `modal:open`, `modal:close`: Открытие и закрытие модальных окон.

## Подробное описание классов

### Класс `Api`

Базовый класс для работы с API. Предоставляет методы для выполнения HTTP-запросов.

#### Конструктор

- `baseUrl: string`: Базовый URL API, к которому будут выполняться запросы.
- `options: RequestInit = {}`: Опциональные настройки для запросов (по умолчанию пустой объект).

#### Свойства

- `readonly baseUrl: string`: Базовый URL API (только для чтения).
- `protected options: RequestInit`: Настройки запросов, включая заголовки.

#### Методы

- `protected handleResponse(response: Response): Promise<object>`: 
  Обрабатывает ответ от сервера. Если ответ успешный (ok), возвращает данные в формате JSON. 
  В случае ошибки, отклоняет промис с текстом ошибки.

- `get(uri: string): Promise<object>`: 
  Выполняет GET-запрос к указанному URI. 
  - `uri: string`: Относительный путь ресурса.
  - Возвращает: Promise с данными ответа.

- `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>`: 
  Выполняет POST, PUT или DELETE запрос к указанному URI. 
  - `uri: string`: Относительный путь ресурса.
  - `data: object`: Данные для отправки в теле запроса.
  - `method: ApiPostMethods`: HTTP-метод (POST, PUT или DELETE). По умолчанию 'POST'.
  - Возвращает: Promise с данными ответа.

#### Дополнительные типы

- `ApiListResponse<Type>`: Тип для ответа API, содержащего список элементов.
  - `total: number`: Общее количество элементов.
  - `items: Type[]`: Массив элементов указанного типа.

- `ApiPostMethods`: Тип, определяющий допустимые HTTP-методы для post-запросов ('POST' | 'PUT' | 'DELETE').

Этот класс обеспечивает базовую функциональность для взаимодействия с API, включая выполнение GET и POST запросов, а также обработку ответов.


### Класс `EventEmitter`

Реализует паттерн "Наблюдатель" для управления событиями в приложении. Позволяет подписываться на события, отписываться от них и генерировать события.

#### Типы

- `EventName = string | RegExp`: Имя события (строка или регулярное выражение).
- `Subscriber = Function`: Функция-подписчик на событие.
- `EmitterEvent = { eventName: string, data: unknown }`: Структура события.

#### Интерфейс `IEvents`

Определяет основные методы для работы с событиями:
- `on<T extends object>(event: EventName, callback: (data: T) => void): void`
- `emit<T extends object>(event: string, data?: T): void`
- `trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void`

#### Конструктор

Инициализирует пустую коллекцию событий и подписчиков.

#### Методы

- `on<T extends object>(eventName: EventName, callback: (event: T) => void): void`
  Подписывает обработчик на событие.
  - `eventName`: Имя события или регулярное выражение.
  - `callback`: Функция-обработчик события.

- `off(eventName: EventName, callback: Subscriber): void`
  Отписывает обработчик от события.
  - `eventName`: Имя события или регулярное выражение.
  - `callback`: Функция-обработчик для удаления.

- `emit<T extends object>(eventName: string, data?: T): void`
  Генерирует событие с опциональными данными.
  - `eventName`: Имя генерируемого события.
  - `data`: Опциональные данные события.

- `onAll(callback: (event: EmitterEvent) => void): void`
  Подписывает обработчик на все события.
  - `callback`: Функция-обработчик, вызываемая для всех событий.

- `offAll(): void`
  Удаляет все обработчики событий.

- `trigger<T extends object>(eventName: string, context?: Partial<T>): (data: T) => void`
  Создает функцию-триггер, которая при вызове генерирует указанное событие.
  - `eventName`: Имя события для генерации.
  - `context`: Дополнительный контекст, добавляемый к данным события.
  - Возвращает: Функцию, генерирующую событие при вызове.

#### Особенности

- Поддерживает подписку на события с использованием строковых имен и регулярных выражений.
- Позволяет подписываться на все события с помощью метода `onAll`.
- Предоставляет механизм создания триггеров событий через метод `trigger`.
- Обеспечивает эффективное управление памятью, удаляя пустые наборы подписчиков.

Этот класс предоставляет гибкую систему управления событиями, которая может быть использована для организации слабосвязанной архитектуры приложения, где компоненты могут взаимодействовать друг с другом через события, не имея прямых зависимостей.

### Класс `Component<T>`

Абстрактный базовый класс для компонентов пользовательского интерфейса. Предоставляет общие методы для манипуляции DOM-элементами.

#### Конструктор

- `protected readonly container: HTMLElement`: Контейнер, в котором размещается компонент.

#### Методы

- `toggleClass(element: HTMLElement, className: string, force?: boolean): void`
  Переключает CSS-класс для указанного элемента.
  - `element: HTMLElement`: Целевой элемент.
  - `className: string`: Имя класса для переключения.
  - `force?: boolean`: Если указано, принудительно добавляет (true) или удаляет (false) класс.

- `protected setText(element: HTMLElement, value: unknown): void`
  Устанавливает текстовое содержимое элемента.
  - `element: HTMLElement`: Целевой элемент.
  - `value: unknown`: Значение для установки в качестве текста.

- `setDisabled(element: HTMLElement, state: boolean): void`
  Устанавливает или снимает атрибут 'disabled' для элемента.
  - `element: HTMLElement`: Целевой элемент.
  - `state: boolean`: true для установки disabled, false для снятия.

- `protected setHidden(element: HTMLElement): void`
  Скрывает элемент, устанавливая его style.display в 'none'.
  - `element: HTMLElement`: Элемент для скрытия.

- `protected setVisible(element: HTMLElement): void`
  Делает элемент видимым, удаляя свойство display из его стиля.
  - `element: HTMLElement`: Элемент для отображения.

- `protected setImage(element: HTMLImageElement, src: string, alt?: string): void`
  Устанавливает источник и альтернативный текст для изображения.
  - `element: HTMLImageElement`: Элемент изображения.
  - `src: string`: URL источника изображения.
  - `alt?: string`: Опциональный альтернативный текст.

- `render(data?: Partial<T>): HTMLElement`
  Отрисовывает компонент, обновляя его данные.
  - `data?: Partial<T>`: Опциональные данные для обновления состояния компонента.
  - Возвращает: HTMLElement контейнера компонента.

Этот абстрактный класс предоставляет базовую функциональность для создания компонентов пользовательского интерфейса. Он включает методы для манипуляции DOM-элементами, такие как переключение классов, установка текста, управление видимостью и состоянием disabled, а также работа с изображениями. Метод `render` предназначен для обновления и отрисовки компонента на основе переданных данных.

Класс является обобщенным (generic) с типом T, что позволяет определять тип данных, специфичный для каждого конкретного компонента при наследовании.


### Класс `Model<T>`

Абстрактный базовый класс для моделей данных. Предоставляет основу для создания моделей с возможностью оповещения об изменениях.

#### Типы

- `isModel`: Функция-гарда для проверки, является ли объект экземпляром `Model`.
  ```typescript
  isModel = (obj: unknown): obj is Model<any> => obj instanceof Model
  ```

#### Конструктор

- `data: Partial<T>`: Частичные данные для инициализации модели.
- `protected events: IEvents`: Экземпляр системы событий для оповещения об изменениях.

#### Методы

- `emitChanges(event: string, payload?: object): void`
  Оповещает слушателей о изменениях в модели.
  - `event: string`: Имя события, сигнализирующего об изменении.
  - `payload?: object`: Опциональные данные, передаваемые вместе с событием.

#### Особенности

- Использует обобщенный тип `T` для определения структуры данных модели.
- Автоматически присваивает переданные данные к свойствам экземпляра модели в конструкторе.
- Предоставляет защищенное свойство `events` для работы с системой событий.
- Метод `emitChanges` позволяет легко оповещать о изменениях в модели, используя предоставленную систему событий.

#### Использование

Этот абстрактный класс предназначен для создания конкретных моделей данных путем наследования. Он обеспечивает базовую функциональность для инициализации данных и оповещения об изменениях, что позволяет реализовать реактивное поведение в приложении.

Функция `isModel` может быть использована для проверки, является ли объект экземпляром модели, что полезно при работе с различными типами данных в приложении.

Этот класс является ключевым компонентом в реализации паттерна MVP (Model-View-Presenter) или подобных архитектурных решений, обеспечивая связь между данными и представлением через систему событий.


### Класс `AppData`

Класс `AppData` расширяет базовый класс `Model<IAppState>` и представляет основную модель данных приложения, управляющую состоянием корзины, каталога товаров, заказа и ошибок формы.

#### Свойства

- `protected basket: IProduct[]`: Массив товаров в корзине.
- `protected catalog: IProduct[]`: Массив товаров в каталоге.
- `public order: IOrder`: Объект с данными заказа (email, phone, address, payment).
- `protected formErrors: IFormErrors`: Объект с ошибками формы.

#### Методы

- `setBasket(items: IProduct[]): void`
  Устанавливает содержимое корзины и генерирует событие изменения.

- `getBasket(): IProduct[]`
  Возвращает текущее содержимое корзины.

- `isInBasket(id: string): boolean`
  Проверяет, находится ли товар с указанным id в корзине.

- `getBasketIds(): string[]`
  Возвращает массив id товаров в корзине.

- `deleteItemFromBasket(id: string): void`
  Удаляет товар из корзины по id и генерирует событие изменения.

- `addItemToBasket(item: IProduct): void`
  Добавляет товар в корзину и генерирует событие изменения.

- `clearBasket(): void`
  Очищает корзину.

- `getTotal(): number`
  Вычисляет общую стоимость товаров в корзине.

- `setCatalog(items: IProduct[]): void`
  Устанавливает каталог товаров и генерирует событие изменения.

- `getCatalog(): IProduct[]`
  Возвращает текущий каталог товаров.

- `setOrderField(field: keyof IOrder, value: string): void`
  Устанавливает значение поля заказа и запускает соответствующую валидацию.

- `validateOrderForm(): void`
  Проверяет валидность формы заказа (адрес и способ оплаты).

- `validateContactForm(): void`
  Проверяет валидность формы контактных данных (email и телефон).

- `clearOrder(): void`
  Сбрасывает данные заказа к исходным значениям.

#### Особенности

- Использует систему событий для оповещения об изменениях в данных (корзина, каталог, ошибки форм).
- Реализует логику управления корзиной, включая добавление, удаление и подсчет общей стоимости.
- Обеспечивает валидацию форм заказа и контактных данных.
- Позволяет управлять каталогом товаров.

Этот класс является центральным компонентом в архитектуре приложения, управляя всеми основными данными и бизнес-логикой. Он обеспечивает интерфейс для взаимодействия с данными приложения и генерирует события, которые могут быть обработаны в презентере для обновления пользовательского интерфейса.

### Класс `Form<T>`

Базовый класс для создания форм в приложении. Наследуется от `Component<IFormState>` и обеспечивает основную функциональность для работы с формами.

#### Интерфейс `IFormState`

Описывает состояние формы:
```typescript
interface IFormState {
  valid: boolean;
  errors: string[];
  address: string;
  payment: string;
  phone: string;
  email: string;
}
```

#### Конструктор

- `protected container: HTMLFormElement`: HTML-элемент формы.
- `protected event: IEvents`: Система событий для коммуникации.

#### Защищенные свойства

- `_submit: HTMLButtonElement`: Кнопка отправки формы.
- `_errors: HTMLElement`: Элемент для отображения ошибок.

#### Методы

- `set valid(value: boolean)`
  Устанавливает состояние валидности формы, активируя или деактивируя кнопку отправки.

- `set errors(value: string)`
  Устанавливает текст ошибок формы.

- `onInputChange(field: keyof T, value: string)`
  Обработчик изменения значения поля ввода. Генерирует событие изменения.

- `clearForm()`
  Очищает форму, сбрасывая все поля к исходным значениям.

#### Особенности

- Автоматически находит кнопку отправки и контейнер для ошибок в DOM.
- Предотвращает стандартное поведение отправки формы и генерирует собственное событие.
- Слушает события ввода на всех полях формы и вызывает `onInputChange` для каждого изменения.
- Использует обобщенный тип `T` для определения структуры данных формы.

#### Использование

Этот класс предназначен для создания конкретных форм путем наследования. Он обеспечивает базовую функциональность для обработки отправки формы, валидации и обновления UI.

Класс `Form` является важным компонентом в реализации пользовательского интерфейса, обеспечивая стандартизированный подход к работе с формами в приложении. Он интегрируется с системой событий, что позволяет легко связывать формы с другими компонентами приложения в рамках архитектуры MVP или подобных паттернов.


### Класс `Modal`

Класс `Modal` расширяет базовый класс `Component<IModal>` и реализует функциональность модального окна в приложении.

#### Интерфейс `IModal`

```typescript
interface IModal {
  content: HTMLElement;
}
```

#### Конструктор

- `container: HTMLElement`: Корневой элемент модального окна.
- `protected event: IEvents`: Система событий для коммуникации.

#### Защищенные свойства

- `_content: HTMLElement`: Контейнер для содержимого модального окна.
- `_closeButton: HTMLButtonElement`: Кнопка закрытия модального окна.

#### Методы

- `set content(value: HTMLElement)`
  Устанавливает новое содержимое модального окна, заменяя существующее.

- `open(): void`
  Открывает модальное окно, добавляя класс `modal_active` и генерируя событие `modal:open`.

- `close(): void`
  Закрывает модальное окно, удаляя класс `modal_active`, очищая содержимое и генерируя событие `modal:close`.

- `render(data: IModal): HTMLElement`
  Отрисовывает модальное окно с заданным содержимым и открывает его.

#### Особенности

- Автоматически находит элементы содержимого и кнопку закрытия в DOM.
- Устанавливает обработчики событий для закрытия модального окна при клике на фон или кнопку закрытия.
- Предотвращает закрытие модального окна при клике на его содержимое.
- Интегрируется с системой событий, генерируя события открытия и закрытия.

Этот класс является важным компонентом пользовательского интерфейса, обеспечивая удобный способ отображения модальных окон с динамическим содержимым. Он хорошо интегрируется в архитектуру MVP, позволяя легко управлять отображением модальных окон из презентера.

### Класс `Card`

Класс `Card` расширяет базовый класс `Component<IProduct>` и представляет компонент карточки товара в пользовательском интерфейсе.

#### Интерфейс `ICardActions`

```typescript
interface ICardActions {
  onClick: (event: MouseEvent) => void;
}
```

#### Конструктор

- `protected blockName: string`: Имя блока для формирования селекторов.
- `container: HTMLElement`: Корневой элемент компонента карточки.
- `actions?: ICardActions`: Объект с обработчиками событий.

#### Защищенные свойства

- `_id?: string`: ID карточки.
- `_category?: HTMLElement`: Элемент категории товара.
- `_title: HTMLElement`: Элемент заголовка карточки.
- `_image?: HTMLImageElement`: Элемент изображения товара.
- `_price?: HTMLElement`: Элемент цены товара.
- `_description?: HTMLElement`: Элемент описания товара.
- `_button?: HTMLButtonElement`: Кнопка действия (например, "В корзину").
- `_deleteButton?: HTMLButtonElement`: Кнопка удаления товара из корзины.
- `_index: HTMLElement`: Элемент для отображения индекса товара в корзине.

#### Методы и сеттеры/геттеры

- `set/get id(value: string)`
  Устанавливает/получает ID карточки.

- `set/get title(value: string)`
  Устанавливает/получает заголовок карточки.

- `set image(value: string)`
  Устанавливает изображение товара.

- `set description(value: string)`
  Устанавливает описание товара.

- `set category(value: string)`
  Устанавливает категорию товара и применяет соответствующий CSS-класс.

- `set/get price(value: number | null)`
  Устанавливает/получает цену товара. При null цене устанавливает специальный текст и блокирует кнопку.

- `set button(value: string)`
  Устанавливает текст кнопки действия.

- `setButtonText(value: boolean)`
  Изменяет текст кнопки в зависимости от состояния (в корзине/не в корзине).

- `set index(value: number)`
  Устанавливает индекс товара в корзине.

#### Особенности

- Автоматически находит и инициализирует все необходимые элементы карточки в DOM.
- Поддерживает различные категории товаров с соответствующими стилями.
- Обрабатывает специальный случай для товаров без цены ("Бесценно").
- Позволяет динамически изменять текст кнопки в зависимости от состояния товара (в корзине/не в корзине).
- Поддерживает функциональность удаления товара из корзины.

Этот класс обеспечивает гибкое и функциональное представление карточки товара, которое можно использовать как для отображения товаров в каталоге, так и в корзине. Он поддерживает различные взаимодействия пользователя и легко настраивается для разных типов товаров.

### Класс `Basket`

Класс `Basket` расширяет базовый класс `Component<IBasketView>` и представляет компонент корзины в пользовательском интерфейсе.

#### Интерфейс `IBasketView`

```typescript
interface IBasketView {
  list: HTMLElement[];
  total: number;
}
```

#### Конструктор

- `container: HTMLElement`: Корневой элемент компонента корзины.
- `protected events: EventEmitter`: Система событий для коммуникации.

#### Защищенные свойства

- `_list: HTMLElement`: Контейнер для списка товаров в корзине.
- `_total: HTMLElement`: Элемент для отображения общей стоимости.
- `_button: HTMLElement`: Кнопка оформления заказа.

#### Методы

- `set list(items: HTMLElement[])`
  Устанавливает список товаров в корзине. Если корзина пуста, отображает соответствующее сообщение. Также управляет состоянием кнопки оформления заказа.

- `set total(total: number)`
  Устанавливает и отображает общую стоимость товаров в корзине.

#### Особенности

- Автоматически находит необходимые элементы в DOM при инициализации.
- Устанавливает обработчик события на кнопку оформления заказа, который генерирует событие 'order:open'.
- Динамически обновляет содержимое корзины и общую стоимость.
- Управляет доступностью кнопки оформления заказа в зависимости от наличия товаров в корзине.
- Использует вспомогательные функции `createElement` и `ensureElement` для работы с DOM.

Этот класс отвечает за отображение и управление корзиной товаров в пользовательском интерфейсе. Он обеспечивает визуальное представление списка товаров, общей стоимости и кнопки оформления заказа, а также взаимодействует с системой событий для инициирования процесса оформления заказа.

### Класс `ContactForm`

`ContactForm` - это класс, который расширяет класс `Form` с типом `IContactForm`. Он используется для обработки контактной формы в приложении.

#### Свойства

- `_name: HTMLInputElement`: Элемент ввода для поля имени в контактной форме.
- `_email: HTMLInputElement`: Элемент ввода для поля электронной почты в контактной форме.

#### Конструктор

Конструктор этого класса принимает два параметра:

- `container: HTMLFormElement`: Элемент формы, которым будет управлять этот класс.
- `event: IEvents`: Объект, содержащий обработчики событий.

В конструкторе `container` и `event` передаются в конструктор `super` (конструктор класса `Form`). Свойства `_name` и `_email` также инициализируются путем получения элементов с именами "name" и "email" из `container`.

#### Методы

- `set name (value: string)`: Сеттер для свойства `_name`. Он устанавливает значение элемента ввода имени.
- `set email (value: string)`: Сеттер для свойства `_email`. Он устанавливает значение элемента ввода электронной почты.

#### Особенности

- Автоматически находит и инициализирует элементы ввода имени и электронной почты в DOM.
- Предоставляет сеттеры для установки значений полей имени и электронной почты.
- Использует систему событий для оповещения о вводе данных пользователем.
- Интегрируется с системой валидации формы, позволяя проверять корректность введенных данных.
- Поддерживает очистку полей формы для нового ввода данных.

Этот класс является важным компонентом пользовательского интерфейса, обеспечивая удобный способ ввода контактных данных пользователем. Он хорошо интегрируется в архитектуру MVP, позволяя легко связывать форму контактных данных с другими компонентами приложения.

### Класс `OrderForm`

`OrderForm` - это класс, который расширяет класс `Form` с типом `IOrderForm`. Он используется для обработки формы заказа в приложении.

#### Свойства

- `_paymentButtons: HTMLButtonElement[]`: Массив кнопок для выбора способа оплаты.
- `_address: HTMLInputElement`: Элемент ввода для поля адреса доставки.

#### Конструктор

Конструктор этого класса принимает два параметра:

- `container: HTMLFormElement`: Элемент формы, которым будет управлять этот класс.
- `event: IEvents`: Объект, содержащий обработчики событий.

В конструкторе `container` и `event` передаются в конструктор `super` (конструктор класса `Form`). Свойства `_paymentButtons` и `_address` инициализируются путем получения соответствующих элементов из `container`.

#### Методы

- `set address (value: string)`: Сеттер для свойства `_address`. Он устанавливает значение элемента ввода адреса.
- `set paymentButton (name: string)`: Сеттер для выбранной кнопки оплаты. Он устанавливает активную кнопку оплаты.
- `clearForm()`: Метод для очистки формы и сброса выбранной кнопки оплаты.

#### Особенности

- Автоматически находит и инициализирует элементы ввода адреса и кнопки оплаты в DOM.
- Предоставляет сеттеры для установки значений полей адреса и выбранной кнопки оплаты.
- Использует систему событий для оповещения о вводе данных пользователем.
- Интегрируется с системой валидации формы, позволяя проверять корректность введенных данных.
- Поддерживает очистку полей формы для нового ввода данных.

Этот класс является важным компонентом пользовательского интерфейса, обеспечивая удобный способ ввода данных заказа пользователем. Он хорошо интегрируется в архитектуру MVP, позволяя легко связывать форму заказа с другими компонентами приложения.

### Класс `Page`

`Page` - это класс, который расширяет класс `Component` с типом `IPage`. Он используется для отображения главной страницы приложения.

#### Свойства

- `_counter: HTMLElement`: Элемент для отображения количества товаров в корзине.
- `_catalog: HTMLElement`: Элемент для отображения карточек товаров в каталоге.
- `_basket: HTMLButtonElement`: Кнопка для открытия корзины.
- `_wrapper: HTMLElement`: Обертка страницы.

#### Конструктор

Конструктор этого класса принимает два параметра:

- `container: HTMLElement`: Элемент, которым будет управлять этот класс.
- `events: IEvents`: Объект, содержащий обработчики событий.

В конструкторе `container` и `events` передаются в конструктор `super` (конструктор класса `Component`). Свойства `_counter`, `_catalog`, `_basket` и `_wrapper` инициализируются путем получения соответствующих элементов из `container`.

#### Методы

- `set counter (value: number)`: Сеттер для свойства `_counter`. Он устанавливает значение счетчика товаров в корзине.
- `set catalog (cards: HTMLElement[])`: Сеттер для свойства `_catalog`. Он устанавливает карточки товаров в каталоге.
- `set locked (value: boolean)`: Сеттер для свойства `_wrapper`. Он устанавливает блокировку прокрутки страницы.

#### Особенности

- Автоматически находит и инициализиует элементы счетчика, каталога, корзины и обертки страницы в DOM.
- Предоставляет сеттеры для установки значений счетчика, карточек каталога и блокировки прокрутки страницы.
- Использует систему событий для оповещения о клике по кнопке корзины.
- Интегрируется с системой компонентов, позволяя легко связывать страницу с другими компонентами приложения.

### Класс `SuccessForm`

`SuccessForm` - это класс, который расширяет класс `Component` с типом `ISuccessFormData`. Он используется для отображения формы успешного оформления заказа.

#### Свойства

- `_closeButton: HTMLButtonElement`: Кнопка для закрытия формы.
- `_description: HTMLElement`: Элемент для отображения описания успешного оформления заказа.

#### Конструктор

Конструктор этого класса принимает два параметра:

- `container: HTMLElement`: Элемент, которым будет управлять этот класс.
- `event: IEvents`: Объект, содержащий обработчики событий.

В конструкторе `container` и `event` передаются в конструктор `super` (конструктор класса `Component`). Свойства `_closeButton` и `_description` инициализируются путем получения соответствующих элементов из `container`.

#### Методы

- `set total (value: number)`: Сеттер для свойства `_description`. Он устанавливает текст описания успешного оформления заказа.

#### Особенности

- Автоматически находит и инициализирует элементы кнопки закрытия и описания в DOM.
- Предоставляет сеттер для установки текста описания успешного оформления заказа.
- Использует систему событий для оповещения о клике по кнопке закрытия.
- Интегрируется с системой компонентов, позволяя легко связывать форму успешного оформления заказа с другими компонентами приложения.

### Класс `WebLarekApi`

`WebLarekApi` - это класс, который расширяет базовый класс `Api`. Он используется для взаимодействия с API сервера. Вот его основные характеристики:

#### Свойства

- `_cdn: string`: URL сети доставки контента (CDN) для загрузки контета.

#### Конструктор

Конструктор этого класса принимает три параметра:

- `cdn: string`: URL CDN.
- `baseUrl: string`: Базовый URL API.
- `options: RequestInit`: Необязательные параметры инициализации запроса.

В конструкторе `baseUrl` и `options` передаются в конструктор `super` (конструктор класса `Api`). Также инициализируется свойство `_cdn`.

#### Методы

- `getProduct(id: string): Promise<IProduct>`: Получает информацию о продукте по его ID. Также добавляет URL CDN к URL изображения продукта.
- `getProductsCatalog(): Promise<IProduct[]>`: Получает каталог продуктов. Также добавляет URL CDN к URL каждого изображения продукта в каталоге.
- `order(data: IOrderPost): Promise<IOrderResult>`: Отправляет заказ на сервер.

## Основные типы данных

```typescript
export type ProductCategory = 'софт-скил' | 'другое' | 'дополнительное' | 'кнопка' | 'хард-скил';

export interface IProduct {
    id: string;
    name: string;
    price: number | null;
    image: string;
    description: string;
    category: ProductCategory;
	index?: number;
}

export interface IAppState {
    catalog: IProduct[];
    basket: IProduct[];
    order: IOrder | null;
    formErrors: IFormErrors;
}

export type IOrderPost = IOrder & {
    total: number;
    items: string[];
}

export interface IContactForm {
    email: string;
    phone: string;
}

export interface IOrderForm {
    payment: string;
    address: string;
}

export interface ISuccessForm {
    total: number;
}

export interface IOrderResult {
    id: string;
    total: number;
}

export type IFormErrors = Partial<IOrder>;
export type IOrder = IContactForm & IOrderForm;
```


